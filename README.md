# üõí API de Tienda Virtual - FUMC Backend

> **Proyecto Final del Curso**: Frameworks para desarrollo web - Backend  
> **Instituci√≥n**: Fundaci√≥n Universitaria Mar√≠a Cano (FUMC)  
> **Fecha**: Octubre 2025

---

## üìã Tabla de Contenidos

- [Descripci√≥n](#-descripci√≥n)
- [üéØ Retos y Evaluaci√≥n](#-retos-y-evaluaci√≥n-del-proyecto)
- [Tecnolog√≠as Utilizadas](#-tecnolog√≠as-utilizadas)
- [Caracter√≠sticas](#-caracter√≠sticas)
- [Requisitos Previos](#-requisitos-previos)
- [Instalaci√≥n y Configuraci√≥n](#-instalaci√≥n-y-configuraci√≥n)
- [Ejecutar la API](#-ejecutar-la-api)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [Endpoints Disponibles](#-endpoints-disponibles)
- [Base de Datos](#-base-de-datos)
- [Sistema de Auditor√≠a](#-sistema-de-auditor√≠a)
- [Trabajo en Grupos](#-trabajo-en-grupos)
- [Documentaci√≥n Interactiva](#-documentaci√≥n-interactiva)
- [Soluci√≥n de Problemas](#-soluci√≥n-de-problemas)

---

## üìñ Descripci√≥n

API REST completa para una **Tienda Virtual** que permite:

- ‚úÖ Gestionar **productos** (crear, listar, actualizar, eliminar)
- ‚úÖ Gestionar **clientes** (CRUD completo)
- ‚úÖ **Sistema de auditor√≠a** que registra todas las operaciones
- ‚úÖ **Eliminaci√≥n l√≥gica** (soft delete) - los datos no se borran f√≠sicamente
- ‚úÖ **Trazabilidad por grupos** - cada operaci√≥n queda registrada con el nombre del grupo que la realiz√≥

‚ö†Ô∏è **IMPORTANTE**: Esta API est√° dise√±ada para que **TODOS los grupos de estudiantes trabajen en LA MISMA base de datos** ubicada en `postgres.corvitmedellin.com`. Cada grupo se identifica mediante su nombre de grupo configurado en el archivo `.env` (`GRUPO_ESTUDIANTES`), pero **todos comparten la misma base de datos `fumc_db`**. Esto significa que:
- Todos los grupos pueden ver los productos/clientes creados por otros grupos
- El sistema de auditor√≠a registra qu√© grupo cre√≥/modific√≥ cada registro
- Los emails y documentos de clientes deben ser √∫nicos en TODA la base de datos (compartida entre todos los grupos)

---

## üõ†Ô∏è Tecnolog√≠as Utilizadas

| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| **Python** | 3.8+ | Lenguaje de programaci√≥n |
| **FastAPI** | 0.109.0 | Framework para crear la API REST |
| **PostgreSQL** | 14+ | Base de datos relacional en la nube |
| **SQLAlchemy** | 2.0.25 | ORM para interactuar con la BD |
| **Pydantic** | 2.5.3 | Validaci√≥n de datos |
| **Uvicorn** | 0.27.0 | Servidor ASGI para ejecutar FastAPI |

---

## ‚ú® Caracter√≠sticas

### üîê Gesti√≥n de Productos
- Crear productos con validaci√≥n autom√°tica
- Listar productos con filtros (categor√≠a, activos/inactivos)
- Buscar productos por nombre
- Actualizar productos (solo los campos necesarios)
- Eliminaci√≥n l√≥gica (el producto se marca como inactivo)

### üë• Gesti√≥n de Clientes
- Registrar clientes con validaci√≥n de email √∫nico
- Listar clientes con filtros por ciudad
- Buscar por nombre o email
- Actualizar informaci√≥n
- Eliminaci√≥n l√≥gica

### üìä Sistema de Auditor√≠a
- **Todas** las operaciones quedan registradas
- Trazabilidad completa: qu√© grupo hizo qu√© y cu√°ndo
- Consultar historial por grupo, tabla, operaci√≥n o registro espec√≠fico
- Almacena datos antes y despu√©s de cada modificaci√≥n

### üé® Caracter√≠sticas T√©cnicas
- **Documentaci√≥n autom√°tica** con Swagger UI
- **Validaci√≥n autom√°tica** de datos con Pydantic
- **Manejo de errores** con mensajes descriptivos
- **C√≥digos de estado HTTP** correctos
- **CORS habilitado** para consumo desde frontend

---

## üì¶ Requisitos Previos

Antes de comenzar, aseg√∫rate de tener instalado:

1. **Python 3.8 o superior**
   - Descarga: https://www.python.org/downloads/
   - ‚ö†Ô∏è Durante la instalaci√≥n en Windows: marca "Add Python to PATH"

2. **Git** (para clonar el repositorio)
   - Descarga: https://git-scm.com/downloads

3. **VS Code** (recomendado)
   - Descarga: https://code.visualstudio.com/

4. **Extensi√≥n de Python para VS Code**
   - Abre VS Code ‚Üí Extensions (Ctrl+Shift+X) ‚Üí Busca "Python" ‚Üí Instala la de Microsoft

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### Paso 1: Clonar el repositorio

```bash
# Clona el repositorio (reemplaza con la URL real)
git clone https://github.com/heldigard/trabajo-final-backend-fumc.git

# Entra a la carpeta del proyecto
cd trabajo-final-backend-fumc
```

### Paso 2: Crear entorno virtual

```powershell
# Crear entorno virtual
python -m venv venv
```

‚ö†Ô∏è **IMPORTANTE sobre la activaci√≥n del entorno virtual**:

**NO necesitas activar el entorno virtual manualmente** si usas VS Code con F5.

VS Code est√° configurado para usar **Command Prompt (CMD)** que activa autom√°ticamente el entorno virtual con `venv\Scripts\activate.bat`.

**Si necesitas activar manualmente** (para usar la terminal):

```cmd
# En CMD (Command Prompt) - RECOMENDADO
venv\Scripts\activate.bat
```

**Alternativa en PowerShell** (puede requerir permisos):
```powershell
# En PowerShell (solo si prefieres PowerShell)
.\venv\Scripts\Activate.ps1

# Si da error de permisos:
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

**Nota**: Ver√°s `(venv)` al inicio de tu terminal cuando el entorno est√© activado.

### Paso 3: Instalar dependencias

**‚ú® AUTOM√ÅTICO**: Si usas VS Code y presionas **F5**, las dependencias se instalan autom√°ticamente.

**Manual** (si prefieres instalarlas t√∫ mismo):

```bash
# Actualizar pip (opcional pero recomendado)
python -m pip install --upgrade pip

# Instalar todas las dependencias del proyecto
pip install -r requirements.txt
```

Este comando instalar√°:
- FastAPI
- Uvicorn (servidor)
- SQLAlchemy (ORM)
- Psycopg2 (driver de PostgreSQL)
- Pydantic (validaci√≥n)
- Python-dotenv (variables de entorno)

‚ö†Ô∏è **NOTA**: Si usas el m√©todo de VS Code (F5), **salta este paso**. Las dependencias se instalar√°n autom√°ticamente la primera vez que ejecutes la API.

### Paso 4: Configurar variables de entorno

1. **Copia el archivo de ejemplo**:
   ```cmd
   # Windows CMD (Command Prompt)
   copy .env.example .env
   
   # O en PowerShell
   Copy-Item .env.example .env
   ```

2. **Edita el archivo `.env`** con tus datos:
   ```env
   # Configuraci√≥n de la base de datos (NO CAMBIAR)
   DB_HOST=postgres.corvitmedellin.com
   DB_PORT=5432
   DB_NAME=fumc_db
   DB_USER=fumc_user
   DB_PASSWORD=

   # ‚ö†Ô∏è IMPORTANTE: Cambia esto por el nombre de tu grupo
   GRUPO_ESTUDIANTES=GRUPO_1
   ```

   **Cada grupo debe poner su nombre √∫nico**: `GRUPO_1`, `GRUPO_2`, `GRUPO_3`, etc.

### Paso 5: Base de datos ya inicializada ‚úÖ

**‚úÖ La base de datos ya est√° lista para usar.**

El instructor ya ha ejecutado el script `scripts/init_db.sql` que:
- Cre√≥ las tablas necesarias (`productos`, `clientes`, `historial_auditoria`)
- Carg√≥ datos de ejemplo (27 productos, 15 clientes)
- Configur√≥ √≠ndices y triggers

**NO necesitas ejecutar ning√∫n script SQL**. Solo aseg√∫rate de configurar correctamente tu archivo `.env` con el nombre de tu grupo.

üìù **Nota**: El script SQL est√° en `scripts/init_db.sql` solo como referencia para que veas c√≥mo se cre√≥ la base de datos.

---

## ‚ñ∂Ô∏è Ejecutar la API

### Opci√≥n 1: Con VS Code (‚≠ê RECOMENDADO Y AUTOMATIZADO)

**‚ú® TODO ES AUTOM√ÅTICO - Solo presiona F5**

1. **Abre el proyecto en VS Code**:
   ```bash
   code .
   ```

2. **Presiona `F5`** o ve a `Run ‚Üí Start Debugging`

3. **Selecciona** la configuraci√≥n **"üöÄ FastAPI - Tienda Virtual"**

4. **VS Code autom√°ticamente**:
   - ‚úÖ Verifica que pip est√© actualizado
   - ‚úÖ Instala todas las dependencias de `requirements.txt`
   - ‚úÖ Inicia la API en modo desarrollo
   - ‚úÖ Todo sin que tengas que escribir ning√∫n comando

5. ¬°Listo! La API estar√° corriendo en: **http://127.0.0.1:8000**

**üéØ VENTAJAS**:
- **No necesitas ejecutar `pip install`** manualmente
- **No necesitas activar el entorno virtual** manualmente
- **No necesitas escribir comandos** en la terminal
- Si faltan dependencias, se instalan autom√°ticamente
- Si ya est√°n instaladas, el proceso es muy r√°pido (solo verifica)

**üí° TIP**: La primera vez puede tardar un poco instalando las dependencias. Las siguientes veces ser√° casi instant√°neo.

**‚öôÔ∏è CONFIGURACI√ìN IMPORTANTE**: VS Code est√° configurado para usar **Command Prompt (CMD)** en lugar de PowerShell, ya que el entorno virtual se activa mejor con `activate.bat` en los equipos de los estudiantes.

### Opci√≥n 2: Desde la terminal (Manual)

Si prefieres hacerlo manualmente:

```cmd
# === USANDO CMD (RECOMENDADO) ===

# 1. Aseg√∫rate de tener el entorno virtual activado
venv\Scripts\activate.bat

# 2. Instala dependencias (solo la primera vez)
pip install -r requirements.txt

# 3. Ejecutar con Uvicorn
uvicorn main:app --reload

# O ejecutar main.py directamente
python main.py
```

**Alternativa en PowerShell**:
```powershell
# 1. Activar entorno (puede requerir permisos)
.\venv\Scripts\Activate.ps1

# 2-3. (Mismo que arriba)
```

### Verificar que funciona

Abre tu navegador y visita:

- **API ra√≠z**: http://127.0.0.1:8000/
- **Documentaci√≥n interactiva**: http://127.0.0.1:8000/docs
- **Documentaci√≥n alternativa**: http://127.0.0.1:8000/redoc
- **Health check**: http://127.0.0.1:8000/health

---

## üìÅ Estructura del Proyecto

```
trabajo-final-backend-fumc/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # C√≥digo principal de la aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ models/                   # Modelos de base de datos (SQLAlchemy)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # Importa todos los modelos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ producto.py          # Modelo Producto (tabla productos)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente.py           # Modelo Cliente (tabla clientes)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auditoria.py         # Modelo HistorialAuditoria
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ schemas/                  # Esquemas de validaci√≥n (Pydantic)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py            # ProductoCreate, ClienteResponse, etc.
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ routers/                  # Endpoints organizados por m√≥dulo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ productos.py          # CRUD de productos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clientes.py           # CRUD de clientes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auditoria.py          # Consultas de auditor√≠a
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py                 # Configuraci√≥n (lee .env)
‚îÇ   ‚îî‚îÄ‚îÄ database.py               # Conexi√≥n a PostgreSQL
‚îÇ
‚îú‚îÄ‚îÄ apidog_collections/           # üÜï Colecciones para ApiDog
‚îÇ   ‚îú‚îÄ‚îÄ 01_Productos.json        # Endpoints de productos
‚îÇ   ‚îú‚îÄ‚îÄ 02_Clientes.json         # Endpoints de clientes
‚îÇ   ‚îú‚îÄ‚îÄ 03_Auditoria.json        # Endpoints de auditor√≠a
‚îÇ   ‚îî‚îÄ‚îÄ README.md                # Gu√≠a de uso de las colecciones
‚îÇ
‚îú‚îÄ‚îÄ postman_collections/          # üÜï Colecciones para Postman
‚îÇ   ‚îú‚îÄ‚îÄ 01_Productos.json        # Endpoints de productos
‚îÇ   ‚îú‚îÄ‚îÄ 02_Clientes.json         # Endpoints de clientes
‚îÇ   ‚îú‚îÄ‚îÄ 03_Auditoria.json        # Endpoints de auditor√≠a
‚îÇ   ‚îî‚îÄ‚îÄ README.md                # Gu√≠a de uso de las colecciones
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # Scripts SQL
‚îÇ   ‚îî‚îÄ‚îÄ init_db.sql              # Inicializa BD con datos de ejemplo
‚îÇ
‚îú‚îÄ‚îÄ .vscode/                      # Configuraci√≥n de VS Code
‚îÇ   ‚îú‚îÄ‚îÄ launch.json              # Para ejecutar con F5
‚îÇ   ‚îî‚îÄ‚îÄ settings.json            # Configuraci√≥n del editor
‚îÇ
‚îú‚îÄ‚îÄ main.py                       # Archivo principal de la API
‚îú‚îÄ‚îÄ requirements.txt              # Dependencias de Python
‚îú‚îÄ‚îÄ .env.example                  # Ejemplo de variables de entorno
‚îú‚îÄ‚îÄ .env                          # TUS variables (NO subir a Git)
‚îú‚îÄ‚îÄ .gitignore                    # Archivos ignorados por Git
‚îî‚îÄ‚îÄ README.md                     # Este archivo
```

### üí° Notas sobre la Estructura

- **`app/models/`**: Los modelos est√°n **divididos en archivos separados** para facilitar la comprensi√≥n. Cada archivo representa UNA tabla de la base de datos.
- **`apidog_collections/`**: Contiene colecciones pre-configuradas con **todos los endpoints** listos para importar en ApiDog o Postman. Esto facilita probar la API sin escribir requests manualmente.

---

## üåê Endpoints Disponibles

### üì¶ Productos

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| `GET` | `/productos/` | Listar todos los productos |
| `GET` | `/productos/{id}` | Obtener un producto espec√≠fico |
| `POST` | `/productos/` | Crear un nuevo producto |
| `PUT` | `/productos/{id}` | Actualizar un producto |
| `DELETE` | `/productos/{id}` | Eliminar producto (l√≥gico) |
| `GET` | `/productos/buscar/nombre?query=...` | Buscar por nombre |

### üë• Clientes

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| `GET` | `/clientes/` | Listar todos los clientes |
| `GET` | `/clientes/{id}` | Obtener un cliente espec√≠fico |
| `POST` | `/clientes/` | Crear un nuevo cliente |
| `PUT` | `/clientes/{id}` | Actualizar un cliente |
| `DELETE` | `/clientes/{id}` | Eliminar cliente (l√≥gico) |
| `GET` | `/clientes/buscar/nombre?query=...` | Buscar por nombre |
| `GET` | `/clientes/buscar/email/{email}` | Buscar por email |

### üìä Auditor√≠a

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| `GET` | `/auditoria/` | Historial completo |
| `GET` | `/auditoria/grupo/{nombre}` | Operaciones de un grupo |
| `GET` | `/auditoria/tabla/{tabla}` | Operaciones en una tabla |
| `GET` | `/auditoria/operacion/{tipo}` | Por tipo (CREATE/UPDATE/DELETE) |
| `GET` | `/auditoria/registro/{tabla}/{id}` | Historial de un registro |

---

## üíæ Base de Datos

### Conexi√≥n

La base de datos est√° alojada en la nube:

- **Host**: `postgres.corvitmedellin.com:5432`
- **Base de datos**: `fumc_db`
- **Usuario**: `fumc_user`
- **Contrase√±a**: ``

### Tablas

#### `productos`
```sql
- id (serial primary key)
- nombre (varchar 200) NOT NULL
- descripcion (text)
- precio (numeric 10,2) NOT NULL
- stock (integer) DEFAULT 0
- categoria (varchar 100)
- imagen_url (varchar 500)
- activo (boolean) DEFAULT TRUE
- fecha_creacion (timestamp)
- fecha_actualizacion (timestamp)
- grupo_creador (varchar 50)
- grupo_ultima_modificacion (varchar 50)
```

#### `clientes`
```sql
- id (serial primary key)
- nombre (varchar 100) NOT NULL
- email (varchar 150) UNIQUE NOT NULL
- telefono (varchar 20)
- direccion (text)
- ciudad (varchar 100)
- documento (varchar 20) UNIQUE
- activo (boolean) DEFAULT TRUE
- fecha_creacion (timestamp)
- fecha_actualizacion (timestamp)
- grupo_creador (varchar 50)
- grupo_ultima_modificacion (varchar 50)
```

#### `historial_auditoria`
```sql
- id (serial primary key)
- tabla_afectada (varchar 50)
- id_registro (integer)
- operacion (varchar 20) - CREATE/UPDATE/DELETE
- grupo_responsable (varchar 50)
- datos_anteriores (text) - JSON
- datos_nuevos (text) - JSON
- fecha_operacion (timestamp)
- observaciones (text)
```

---

## üîç Sistema de Auditor√≠a

Cada vez que un grupo realiza una operaci√≥n (crear, actualizar, eliminar), se registra autom√°ticamente:

- ‚úÖ Qu√© grupo lo hizo
- ‚úÖ Qu√© operaci√≥n realiz√≥ (CREATE/UPDATE/DELETE)
- ‚úÖ En qu√© tabla y registro
- ‚úÖ Cu√°ndo lo hizo (fecha y hora)
- ‚úÖ Qu√© datos cambi√≥ (antes y despu√©s)

### Ejemplo de consulta de auditor√≠a

**Ver qu√© hizo mi grupo**:
```
GET /auditoria/grupo/GRUPO_1
```

**Ver todas las operaciones en productos**:
```
GET /auditoria/tabla/productos
```

**Ver historial de un producto espec√≠fico**:
```
GET /auditoria/registro/productos/5
```

---

## üë• Trabajo en Grupos

### Configuraci√≥n de Grupo

1. **Cada grupo** debe tener un nombre √∫nico en `.env`:
   ```env
   GRUPO_ESTUDIANTES=GRUPO_1
   ```

2. **Coordinar con otros grupos** para no usar el mismo nombre:
   - `GRUPO_1`, `GRUPO_2`, `GRUPO_3`...
   - O nombres creativos: `LOS_PROGRAMADORES`, `TEAM_BACKEND`, etc.

3. **Todas las operaciones** de tu grupo quedar√°n registradas con este nombre

### Buenas Pr√°cticas

‚úÖ **S√≠ hacer**:
- Crear productos propios de tu grupo
- Actualizar productos que cre√≥ tu grupo
- Experimentar con diferentes categor√≠as
- Probar todos los endpoints

‚ùå **Evitar**:
- Eliminar productos de otros grupos (sin autorizaci√≥n)
- Usar datos ofensivos o inapropiados
- Modificar masivamente datos de otros grupos

---

## üìö Documentaci√≥n Interactiva

FastAPI genera documentaci√≥n autom√°tica interactiva:

### Swagger UI (Recomendado)
**URL**: http://127.0.0.1:8000/docs

**Caracter√≠sticas**:
- Probar todos los endpoints directamente
- Ver los schemas de entrada/salida
- Ejecutar requests sin necesidad de Postman
- Ver c√≥digos de respuesta

**C√≥mo usar**:
1. Abre `/docs` en tu navegador
2. Haz clic en cualquier endpoint
3. Click en "Try it out"
4. Completa los datos
5. Click en "Execute"
6. Ver la respuesta

### ReDoc
**URL**: http://127.0.0.1:8000/redoc

Documentaci√≥n alternativa m√°s enfocada en lectura.

### üÜï ApiDog / Postman (Recomendado para estudiantes)

**¬øQu√© son estas herramientas?**
Son herramientas profesionales para probar APIs. Hemos creado **colecciones pre-configuradas** con TODOS los endpoints listos para usar.

**Ventajas**:
- ‚úÖ No necesitas escribir requests manualmente
- ‚úÖ Todos los endpoints est√°n organizados y documentados
- ‚úÖ Ejemplos de datos incluidos
- ‚úÖ F√°cil de usar para principiantes

**Elige tu herramienta favorita**:

| Herramienta | Carpeta | Descarga |
|-------------|---------|----------|
| üìÆ **Postman** | `postman_collections/` | https://www.postman.com/downloads/ |
| üêï **ApiDog** | `apidog_collections/` | https://apidog.com/ |

**C√≥mo usar las colecciones**:

1. **Instalar tu herramienta preferida** (Postman o ApiDog)

2. **Importar las colecciones**:
   - Abre Postman o ApiDog
   - Click en "Import"
   - Busca la carpeta correspondiente:
     - `postman_collections/` para Postman
     - `apidog_collections/` para ApiDog
   - Importa los 3 archivos JSON:
     - `01_Productos.json`
     - `02_Clientes.json`
     - `03_Auditoria.json`

3. **Empezar a probar**:
   - Aseg√∫rate de que tu API est√© corriendo (F5 en VS Code)
   - Selecciona un request de la colecci√≥n
   - Click en "Send"
   - ¬°Listo! Ver respuesta

**üìö Gu√≠as Detalladas**:
- Para Postman: Lee `postman_collections/README.md`
- Para ApiDog: Lee `apidog_collections/README.md`

---

## üîß Soluci√≥n de Problemas

### Problema: `ModuleNotFoundError: No module named 'fastapi'`

**Soluci√≥n Autom√°tica** (Recomendada):
- Simplemente **presiona F5** de nuevo en VS Code
- El sistema instalar√° autom√°ticamente las dependencias faltantes

**Soluci√≥n Manual**:
```bash
# Verifica que el entorno virtual est√© activado
# Debes ver (venv) al inicio de tu terminal

# Si no est√° activado:
.\venv\Scripts\Activate.ps1

# Instala las dependencias
pip install -r requirements.txt
```

**Verificar instalaci√≥n**:
- En VS Code: `Ctrl+Shift+P` ‚Üí "Tasks: Run Task" ‚Üí "Listar Dependencias Instaladas"

### Problema: Las dependencias no se instalan autom√°ticamente

**Soluci√≥n**:

1. **Verificar que VS Code tiene Python configurado**:
   - `Ctrl+Shift+P` ‚Üí "Python: Select Interpreter"
   - Selecciona el int√©rprete de `venv` (debe aparecer como `.\venv\Scripts\python.exe`)

2. **Ejecutar tarea manualmente**:
   - `Ctrl+Shift+P` ‚Üí "Tasks: Run Task"
   - Seleccionar "Instalar Dependencias"

3. **Verificar entorno**:
   - `Ctrl+Shift+P` ‚Üí "Tasks: Run Task"
   - Seleccionar "Verificar Entorno"
   - Debe mostrar versiones de Python y pip

### Problema: Error de conexi√≥n a PostgreSQL

**Verificar**:
1. Archivo `.env` tiene los datos correctos (especialmente `GRUPO_ESTUDIANTES`)
2. Tienes conexi√≥n a internet
3. El servidor de base de datos est√° disponible

**Probar conexi√≥n**:
```python
# Ejecuta en Python
from app.config import settings
print(settings.database_url)
```

### Problema: `PowerShell cannot be loaded because running scripts is disabled`

**Soluci√≥n**:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Problema: Puerto 8000 ya est√° en uso

**Soluci√≥n**:

**Opci√≥n 1**: Detener el proceso que usa el puerto:
```powershell
# Ver qu√© proceso usa el puerto 8000
netstat -ano | findstr :8000

# Detener el proceso (reemplaza PID con el n√∫mero que aparece)
taskkill /PID <PID> /F
```

**Opci√≥n 2**: Cambiar el puerto en `launch.json`:
```json
"args": [
    "main:app",
    "--reload",
    "--host", "0.0.0.0",
    "--port", "8001"  // Cambiar a otro puerto
]
```

### Problema: Los cambios en el c√≥digo no se reflejan

**Verificar**:
- El servidor est√° corriendo con `--reload` (autom√°tico si usas F5)
- Guardaste el archivo (Ctrl+S)
- No hay errores de sintaxis en Python

**Soluci√≥n**: Reinicia el servidor (Stop + F5)

### Problema: Archivos .pyc o cach√© causando problemas

**Soluci√≥n**:
- `Ctrl+Shift+P` ‚Üí "Tasks: Run Task" ‚Üí "Limpiar Cache Python"
- Esto elimina todos los archivos `__pycache__` y `.pyc`

---

## üõ†Ô∏è Tareas √ötiles de VS Code

Adem√°s de ejecutar la API con F5, tienes estas tareas disponibles:

**Acceder a las tareas**:
1. Presiona `Ctrl+Shift+P`
2. Escribe "Tasks: Run Task"
3. Selecciona la tarea que necesitas

**Tareas disponibles**:

| Tarea | Descripci√≥n |
|-------|-------------|
| ‚úÖ **Instalar Dependencias** | Instala/actualiza todas las librer√≠as de requirements.txt |
| üßπ **Limpiar Cache Python** | Elimina archivos __pycache__ y .pyc |
| üîç **Verificar Entorno** | Muestra versiones de Python y pip |
| üì¶ **Listar Dependencias Instaladas** | Muestra todas las librer√≠as instaladas |

**üí° TIP**: Estas tareas son √∫tiles cuando tienes problemas con m√≥dulos o quieres verificar tu entorno.

---

## üìù Ejemplos de Uso

### Crear un Producto

**Request**:
```bash
POST /productos/
Content-Type: application/json

{
  "nombre": "Laptop Dell Inspiron",
  "descripcion": "Laptop con 16GB RAM y 512GB SSD",
  "precio": 2500000,
  "stock": 5,
  "categoria": "Electr√≥nica",
  "imagen_url": "https://ejemplo.com/laptop.jpg"
}
```

**Response** (201 Created):
```json
{
  "id": 30,
  "nombre": "Laptop Dell Inspiron",
  "descripcion": "Laptop con 16GB RAM y 512GB SSD",
  "precio": 2500000.00,
  "stock": 5,
  "categoria": "Electr√≥nica",
  "imagen_url": "https://ejemplo.com/laptop.jpg",
  "activo": true,
  "fecha_creacion": "2025-10-22T10:30:00Z",
  "fecha_actualizacion": "2025-10-22T10:30:00Z",
  "grupo_creador": "GRUPO_1",
  "grupo_ultima_modificacion": null
}
```

### Listar Productos

**Request**:
```bash
GET /productos/?categoria=Electr√≥nica&limit=10
```

**Response** (200 OK):
```json
[
  {
    "id": 1,
    "nombre": "Laptop HP Pavilion 15",
    "precio": 1850000.00,
    ...
  },
  {
    "id": 2,
    "nombre": "iPhone 13 Pro Max",
    "precio": 4500000.00,
    ...
  }
]
```

---

## ÔøΩ Retos y Evaluaci√≥n del Proyecto

Este proyecto se eval√∫a mediante el **sistema de auditor√≠a** en la base de datos. NO necesitas subir c√≥digo a GitHub.

### üìö Documentos Importantes

1. **`RETOS_ESTUDIANTES.md`** - üéØ **LEE ESTO PRIMERO**
   - Define los retos que debes completar (4 niveles)
   - Sistema de puntaje detallado (100 puntos)
   - Todas tus operaciones quedan registradas en la BD
   - La evaluaci√≥n es 100% basada en auditor√≠a

2. **`RUBRICA_EVALUACION.md`** - üìä Para el instructor
   - Criterios de evaluaci√≥n detallados
   - Queries SQL para verificar cada reto
   - Sistema de calificaci√≥n objetivo

3. **`GUIA_CALIFICACION.md`** - ‚ö° Para el instructor
   - Gu√≠a r√°pida de evaluaci√≥n
   - Scripts automatizados de SQL
   - Proceso paso a paso

### üéØ C√≥mo Funciona la Evaluaci√≥n

1. **Configuras tu grupo** en el archivo `.env`:
   ```env
   GRUPO_ESTUDIANTES=GRUPO_1  # TU IDENTIFICADOR
   ```

2. **Realizas operaciones** usando la API:
   - Crear productos y clientes
   - Actualizar registros
   - Eliminar registros (soft delete)
   - Consultar auditor√≠a

3. **TODO queda registrado** en la tabla `historial_auditoria`:
   - Qu√© grupo lo hizo
   - Qu√© operaci√≥n (CREATE/UPDATE/DELETE)
   - Cu√°ndo lo hizo
   - Qu√© datos cambi√≥

4. **El instructor revisa la BD** y califica seg√∫n los retos completados

**üìñ Detalles completos en**: `RETOS_ESTUDIANTES.md`

---

## ÔøΩüéì Conceptos Aprendidos

Al completar este proyecto habr√°s trabajado con:

- ‚úÖ **FastAPI**: Framework moderno de Python para APIs
- ‚úÖ **PostgreSQL**: Base de datos relacional en producci√≥n
- ‚úÖ **SQLAlchemy**: ORM para trabajar con BD
- ‚úÖ **Pydantic**: Validaci√≥n de datos
- ‚úÖ **REST API**: Arquitectura de APIs web
- ‚úÖ **CRUD**: Operaciones b√°sicas de bases de datos
- ‚úÖ **Git**: Control de versiones
- ‚úÖ **Entornos virtuales**: Gesti√≥n de dependencias
- ‚úÖ **Variables de entorno**: Configuraci√≥n segura
- ‚úÖ **Documentaci√≥n autom√°tica**: OpenAPI/Swagger
- ‚úÖ **Soft Delete**: Eliminaci√≥n l√≥gica de datos
- ‚úÖ **Auditor√≠a**: Trazabilidad de operaciones

---

## ü§ù Contribuciones

Si encuentras errores o tienes sugerencias:

1. Reporta el problema al instructor
2. O crea un **Issue** en GitHub (si aplica)
3. Documenta bien el problema encontrado

---

## üìß Soporte

**Instructor**: [Nombre del instructor]  
**Email**: [email del instructor]  
**Horario de clase**: [Horarios]

---

## üìÑ Licencia

Este proyecto es parte del curso de Backend en FUMC y est√° dise√±ado con fines educativos.

---

## üéâ ¬°Felicitaciones!

Si llegaste hasta aqu√≠ y tu API est√° funcionando:

üéä **¬°Felicitaciones!** Has creado una API REST completa con:
- Base de datos en la nube
- Sistema de auditor√≠a
- Validaci√≥n autom√°tica
- Documentaci√≥n interactiva

**Pr√≥ximos pasos**:
1. Prueba todos los endpoints
2. Crea productos y clientes de tu grupo
3. Consulta el historial de auditor√≠a
4. Experimenta actualizando y eliminando datos

---

**¬°√âxitos en tu proyecto final! üöÄ**
